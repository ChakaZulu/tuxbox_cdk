diff -Naur bzip2-1.0.2/Makefile-libbz2_so bzip2-1.0.2-patched/Makefile-libbz2_so
--- bzip2-1.0.2/Makefile-libbz2_so	2001-12-30 03:15:59.000000000 +0100
+++ bzip2-1.0.2-patched/Makefile-libbz2_so	2003-02-03 17:36:17.000000000 +0100
@@ -7,7 +7,6 @@
 # important info about building the library like this.
 
 SHELL=/bin/sh
-CC=gcc
 BIGFILES=-D_FILE_OFFSET_BITS=64
 CFLAGS=-fpic -fPIC -Wall -Winline -O2 -fomit-frame-pointer -fno-strength-reduce $(BIGFILES)
 
@@ -42,3 +41,18 @@
 	$(CC) $(CFLAGS) -c decompress.c
 bzlib.o: bzlib.c
 	$(CC) $(CFLAGS) -c bzlib.c
+
+install:
+	if ( test ! -d $(PREFIX)/bin ) ; then mkdir -p $(PREFIX)/bin ; fi
+	cp -f bzip2-shared $(PREFIX)/bin/bzip2
+	chmod a+x $(PREFIX)/bin/bzip2
+	if ( test ! -d $(PREFIX)/include ) ; then mkdir -p $(PREFIX)/include ; fi
+	cp -f bzlib.h $(PREFIX)/include
+	chmod a+r $(PREFIX)/include/bzlib.h
+	if ( test ! -d $(PREFIX)/lib ) ; then mkdir -p $(PREFIX)/lib ; fi
+	cp -f libbz2.so.1.0.2 $(PREFIX)/lib
+	chmod a+r $(PREFIX)/lib/libbz2.so.1.0.2
+	rm -f $(PREFIX)/lib/libbz2.so.1
+	ln -s $(PREFIX)/lib/libbz2.so.1.0.2 $(PREFIX)/lib/libbz2.so.1
+	rm -f $(PREFIX)/lib/libbz2.so
+	ln -s $(PREFIX)/lib/libbz2.so.1.0.2 $(PREFIX)/lib/libbz2.so
diff -Naur bzip2-1.0.2/Makefile-libbz2_so~ bzip2-1.0.2-patched/Makefile-libbz2_so~
--- bzip2-1.0.2/Makefile-libbz2_so~	1970-01-01 01:00:00.000000000 +0100
+++ bzip2-1.0.2-patched/Makefile-libbz2_so~	2003-02-03 17:35:29.000000000 +0100
@@ -0,0 +1,58 @@
+
+# This Makefile builds a shared version of the library, 
+# libbz2.so.1.0.2, with soname libbz2.so.1.0,
+# at least on x86-Linux (RedHat 7.2), 
+# with gcc-2.96 20000731 (Red Hat Linux 7.1 2.96-98).  
+# Please see the README file for some 
+# important info about building the library like this.
+
+SHELL=/bin/sh
+BIGFILES=-D_FILE_OFFSET_BITS=64
+CFLAGS=-fpic -fPIC -Wall -Winline -O2 -fomit-frame-pointer -fno-strength-reduce $(BIGFILES)
+
+OBJS= blocksort.o  \
+      huffman.o    \
+      crctable.o   \
+      randtable.o  \
+      compress.o   \
+      decompress.o \
+      bzlib.o
+
+all: $(OBJS)
+	$(CC) -shared -Wl,-soname -Wl,libbz2.so.1.0 -o libbz2.so.1.0.2 $(OBJS)
+	$(CC) $(CFLAGS) -o bzip2-shared bzip2.c libbz2.so.1.0.2
+	rm -f libbz2.so.1.0
+	ln -s libbz2.so.1.0.2 libbz2.so.1.0
+
+clean: 
+	rm -f $(OBJS) bzip2.o libbz2.so.1.0.2 libbz2.so.1.0 bzip2-shared
+
+blocksort.o: blocksort.c
+	$(CC) $(CFLAGS) -c blocksort.c
+huffman.o: huffman.c
+	$(CC) $(CFLAGS) -c huffman.c
+crctable.o: crctable.c
+	$(CC) $(CFLAGS) -c crctable.c
+randtable.o: randtable.c
+	$(CC) $(CFLAGS) -c randtable.c
+compress.o: compress.c
+	$(CC) $(CFLAGS) -c compress.c
+decompress.o: decompress.c
+	$(CC) $(CFLAGS) -c decompress.c
+bzlib.o: bzlib.c
+	$(CC) $(CFLAGS) -c bzlib.c
+
+install:
+	if ( test ! -d $(PREFIX)/bin ) ; then mkdir -p $(PREFIX)/bin ; fi
+	cp -f bzip2-shared $(PREFIX)/bin/bzip2
+	chmod a+x $(PREFIX)/bin/bzip2
+	if ( test ! -d $(PREFIX)/include ) ; then mkdir -p $(PREFIX)/include ; fi
+	cp -f bzlib.h $(PREFIX)/include
+	chmod a+r $(PREFIX)/include/bzlib.h
+	if ( test ! -d $(PREFIX)/lib ) ; then mkdir -p $(PREFIX)/lib ; fi
+	cp -f libbz2.so.1.0.2 $(PREFIX)/lib
+	chmod a+r $(PREFIX)/lib/libbz2.so.1.0.2
+	rm $(PREFIX)/lib/libbz2.so.1
+	ln -s $(PREFIX)/lib/libbz2.so.1.0.2 $(PREFIX)/lib/libbz2.so.1
+	rm $(PREFIX)/lib/libbz2.so
+	ln -s $(PREFIX)/lib/libbz2.so.1.0.2 $(PREFIX)/lib/libbz2.so
